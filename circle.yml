dependencies:
  override:
    - pip install -r requirements.txt
    - pip install coveralls

test:
  override:
    - coverage run --source=dataset manage.py test
  post:
    - coveralls

deployment:
  staging:
    branch: master
    codedeploy:
      openfmri_django:
        application_root: /
        deployment-group: openfmri_django_deploy_group
        deployment-config: CodeDeployDefault.OneAtATime
        region: us-west-2
        revision_location:
          revision_type: S3
          s3_location:
            bucket: openfmri_circleci
            key_pattern: apps/rev-{SHORT_COMMIT}-{BUILD_NUM}
